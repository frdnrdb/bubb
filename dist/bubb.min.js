/* bubb v2.0.2 (2018-02-07) | http://bubb.surge.sh | (c) 2018 frdnrdb | licensed MIT */
!function(a,b){var c=this,d=function(a,c){d.config=d.config||("object"==typeof a?a:{}),d.config._=d.config._||a._||{},d.callback=d.callback||"function"==typeof d.config._.callback&&d.config._.callback||"function"==typeof c&&c;var f="update"===arguments[0]?[arguments[1]]:Array.from(b.querySelectorAll("[data-bubb]:not(.bubb)"));f.length&&(!d._initialized&&H(),f.forEach(e))},e=function(b){var e=b.dataset.bubb.trim(),i=d.config[e]||e,j="object"==typeof i,k=j&&i._,l=k&&1===Object.keys(i).length,m=j&&!i.hasOwnProperty("text");l&&(i.text=e);var n=m?Object.keys(i):k?["text"]:[!1],o="function"==typeof d.callback||"function"==typeof d.config._.callback,p=a.getComputedStyle(b).position;b._bubb={key:e,config:f(k),type:m?"menu":k?"opts":"string",markup:n.reduce(g.bind(c,e),""),bind:m&&o||k&&("function"==typeof k.callback||"boolean"==typeof k.callback)},p&&!p.match(/absolute|fixed|relative/)&&(b.style.position="relative"),b.classList.add("bubb"),d.triggers[e]=b,h(b)},f=function(a){return I.reduce(function(b,c){return a&&a.hasOwnProperty(c)?b[c]=a[c]:!!d.config._.hasOwnProperty(c)&&(b[c]=d.config._[c]),b},{})},g=function(a,b,c){if("_"===c)return b;var e=c?d.config[a][c]:d.config[a]||a,f=a+(c&&"text"!==c?"."+c:""),g=' data-bubb-value="'+f+'"';return b+="<div "+g+("><span>"+e)+"</span></div>"},h=function(a){var b=a._bubb.config.toggle?[]:["mouseenter","mouseleave"];a._bubb.bind&&b.push("mousedown"),b.forEach(function(b){return a.addEventListener(b,m,!1)})},i=function(a){var b=a._bubb,c=d._element,e=c._config=b.config;c.style.visibility="hidden",c._elementContent.innerHTML=b.markup,c._bind=b.bind&&e.interactive!==!1||e.toggle,c.className=e["class"]||"",s(e,a,c),"menu"===b.type&&a.classList.add("bubb-menu"),a.appendChild(c),d._trigger=a,d._visible=!1,D(d._element,"_bubblePreactive")},j=function(){D(d._element,"_bubbleActive"),d._visible=!0},k=function(a){D(d._element,["_bubbleInactive","_bubblePreactive"]),d._visible=!1},l=function(b,c){if(b){var e=d._element.offsetHeight||150,f=d._element.offsetWidth||150,g=c._bubb.config.direction,h=c.getBoundingClientRect(),i={w:h.left<f,e:h.right>a.innerWidth-f,n:h.top<e,s:h.bottom>a.innerHeight-e};return!g||"east"!==g&&"west"!==g?(d._autoDirection=i.s?"north":!!i.n&&"south",d._autoAnchor=!1):(d._autoDirection=i.w?"east":!!i.e&&"west",d._autoAnchor=i.n?"left":!!i.s&&"right"),d._autoDirection}},m=function(b){if(this._bubb&&(((d.config._.autoDirection||this._bubb.config.autoDirection)&&l(b,this)||d._trigger!==this)&&i(this),a.clearTimeout(d._timerOn),a.clearTimeout(d._timerOff),"mouseenter"===b.type?d._timerOn=a.setTimeout(j,0|this._bubb.config.delay||0):"mousedown"!==b.type&&k(b),this._bubb.config.autoHide&&(d._timerOff=a.setTimeout(k,this._bubb.config.autoHide+(0|this._bubb.config.delay))),this._bubb.bind&&"mouseleave"!==b.type)){var c=this._bubb.config.hoverCallback,e=c?this.dataset.bubb:b.target.dataset.bubbValue||b.target.parentNode.dataset.bubbValue||b.target.parentNode.parentNode.dataset.bubbValue;if(e){var f="function"==typeof this._bubb.config.callback&&this._bubb.config.callback||d.callback,g=this.querySelector('[data-bubb-value="'+this.dataset.bubb+'"]')||b.target;f(e,g,this,b.type)}}},n=function(a,b){if(a)return!a._bubb||b&&a!==d._trigger?n(a.parentNode):a},o=function(b){!d._toggler&&(d._toggler=b.target),d._toggler!==b.target&&(n(b.target,d._trigger)||(d._toggler=!1,a.removeEventListener("click",o,!1),m.call(d._trigger,{target:d._trigger,type:"mouseleave"})))},p=function(){var b=arguments[0],c="object"==typeof b&&b||d.triggers[b];return c&&c._bubb.config.toggle?(a[(d._visible?"remove":"add")+"EventListener"]("click",o,!1),void m.call(c,{target:c,type:d._visible?"mouseleave":"mouseenter"})):void console.error("bubb: trying to toggle a non-existing or non-toggled element")},q=function(){var a=arguments[0],c=arguments[1];if("string"==typeof a&&c){var e="object"==typeof c,f=a.split(".").reduce(function(a,b,c){return a[["key","val"][c]]=b,a},{}),g=b.querySelector('[data-bubb="'+(f.key||a)+'"]');if(g||e){if(!g)return void console.error("bubb: trying to update a non-existing element");if(g._bubb||d("update",g),d._trigger=!1,!e)return void(g._bubb.markup=g._bubb.markup.replace(new RegExp('<div\\s+data-bubb-value="'+a+'">.*?</div>'),'<div data-bubb-value="'+a+('"><span>'+c)+"</span></div>"));var h="boolean"==typeof c.callback&&!g._bubb.bind,i="function"==typeof c.callback&&!g._bubb.config.hasOwnProperty("callback"),j=c.hoverCallback&&!g._bubb.config.hoverCallback;(h||i||j)&&(g._bubb.bind=!0),(h||i)&&g.addEventListener("mousedown",m,!1),Object.keys(c).forEach(function(a){~I.indexOf(a)&&(g?g._bubb.config[a]=c[a]:d.config._[a]=c[a])}),t(a,c,e,g)}}},r=function(){if(0===arguments.length)return void d();var a=arguments[0],c=arguments[1],e=a.split(".").reduce(function(a,b,c){return a[["key","val"][c]]=b,a},{});if(e.val&&d.config[e.key]){if(d._trigger=!1,c&&"string"==typeof c&&!d.config[e.key][e.val])return d.config[e.key][e.val]=c,void(b.querySelector('[data-bubb="'+e.key+'"]')._bubb.markup+='<div data-bubb-value="'+a+('"><span>'+c)+"</span></div>");if(!c&&d.config[e.key][e.val]){delete d.config[e.key][e.val];var f=b.querySelector('[data-bubb="'+e.key+'"]');f._bubb.markup=f._bubb.markup.replace(new RegExp('<div\\s+data-bubb-value="'+a+'">.*?</div>'),"")}}},s=function(a,c,d){var e=a.width,f=a.anchor,g=a.direction,h="east"===g||"west"===g;if("string"==typeof e&&parseInt(e))return void(d.style.width=e);var i=0|e||b.querySelector(e);if(!i)return void(d.style.width="100%");var j=30,k="object"==typeof i,l=b.body.offsetWidth,m=c.getBoundingClientRect(),n=m.width/2,o=m.left,p=m.right,q=k?i.offsetWidth:100===i?l-2*j:i*l/100;if(f||h){var r=!h&&f?"left"===f?l-o-j:"right"===f&&l-(l-p)-j:"east"===g?l-p-j:"west"===g&&o-j;if(r)return void(d.style.width=Math.min(q,r)+"px")}var s=Math.min(q,2*((o+n>l/2?l-p+n:o+n)-j));d.style.width=s+"px",d.style.left=n-s/2+"px",d._elementTip.style.left=s/2+"px"},t=function(a,b,c,e){var f="menu"===e._bubb.type,g="opts"===e._bubb.type,h=~a.indexOf(".")&&a.split("."),i=h?h.reduce(function(a,b,c){return a[["key","val"][c]]=b,a},{}):{};if(!f&&!g&&!c)return void(d.config[a]=b);var j=i.key||a;return c?f||g?(d.config[j]._=d.config[j]._||b,void Object.assign(d.config[j]._,b)):(d.config[j]={text:d.config[j],_:b},void("opts"===e._bubb.type)):void(d.config[j][i.val||"text"]=b)},u={tipsize:"12px",offset:".15em",distance:"20px",easing:"cubic-bezier(0,0,0,1)",duration:".3s",background:"#444",color:"#fff",rounding:"4px",fontsize:"17px"},v={_bubble:{position:"absolute",zIndex:"99",display:"block",padding:".75em .9em .85em",lineHeight:"1.1",textAlign:"center",cursor:"default",minWidth:"150px",width:"100%",boxSizing:"border-box",textRendering:"optimizeLegibility",WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",wordWrap:"break-word",hyphens:"auto",WebkitTouchCallout:"none",WebkitUserSelect:"none",KhtmlUserSelect:"none",MozUserSelect:"none",MsUserSelect:"none",userSelect:"none"},_bubbleInactive:{visibility:"hidden",pointerEvents:"none",opacity:"0"},_bubblePreactive:{background:u.background,borderBottomColor:u.background,color:u.color,fontSize:u.fontsize},_bubbleActive:{transitionProperty:"opacity, transform",transitionDuration:u.duration,transitionTimingFunction:u.easing,pointerEvents:"all",opacity:"1",visibility:"visible"},_bubbleInteractive:{position:"absolute",zIndex:"-1",display:"none",width:"calc( 100% + ( "+u.tipsize+(" + "+u.offset)+" ) * 2 )",height:"calc( 100% + ( "+u.tipsize+(" + "+u.offset)+" ) * 2 )",top:"calc( -1 * ( "+u.tipsize+(" + "+u.offset)+" ) )",left:"calc( -1 * ( "+u.tipsize+(" + "+u.offset)+" ) )",pointerEvents:"all",background:"transparent"},_bubbleTip:{position:"absolute",width:"0",height:"0",borderLeft:""+u.tipsize+" solid transparent",borderRight:""+u.tipsize+" solid transparent",borderBottomWidth:u.tipsize,borderBottomStyle:"solid",borderBottomColor:"inherit"}},w={positive:{active:"calc( 100% + "+u.tipsize+(" + "+u.offset)+" )",inactive:"calc( 100% + "+u.tipsize+(" + "+u.offset)+(" + "+u.distance)+" )"},negative:{active:"calc( -100% - "+u.tipsize+(" - "+u.offset)+" )",inactive:"calc( -100% - "+u.tipsize+(" - "+u.offset)+(" - "+u.distance)+" )"}},x={x:{east:w.positive,west:w.negative},y:{south:w.positive,north:w.negative}},y={south:{left:[0,1,1,1],right:[1,0,1,1]},north:{left:[1,1,1,0],right:[1,1,0,1]},east:{left:[0,1,1,1],right:[1,1,1,0]},west:{left:[1,0,1,1],right:[1,1,0,1]}},z=function(a,b){return b?"left"===b&&a||"right"===b&&!a?0:"auto":a?"50%":"auto"},A={south:{left:z.bind(this,!0),right:z.bind(this,!1),top:function(a,b){return b?"calc( 2px - "+u.tipsize+" )":"auto"},bottom:function(a,b){return b?"auto":0}},north:{left:function(a,b){return z(!0,b&&a?"left"===a?"left":"right":a)},right:function(a,b){return z(!1,b&&a?"left"===a?"left":"right":a)},top:function(a,b){return b?"auto":0},bottom:function(a,b){return b?"calc( 2px - "+u.tipsize+" )":"auto"}},east:{left:function(a,b){return b?"calc( 2px - "+u.tipsize+" )":"auto"},right:function(a,b){return b?"auto":0},top:function(a,b){return b?z(!0,a):a&&"left"!==a?"auto":"50%"},bottom:function(a,b){return b?z(!1,a):"right"===a?"50%":"auto"}},west:{left:function(a,b){return b?"auto":0},right:function(a,b){return b?"calc( 2px - "+u.tipsize+" )":"auto"},top:function(a,b){return b?z(!0,a):a&&"left"!==a?"auto":"50%"},bottom:function(a,b){return b?z(!1,a):"right"===a?"50%":"auto"}}},B={south:{center:"translate(-50%, 0)",left:"translate(-25%, 50%) rotate(90deg)",right:"translate(25%, 50%) rotate(-90deg)"},north:{center:"translate(-50%, 0) rotate(180deg)",left:"translate(-25%, -50%) rotate(90deg)",right:"translate(25%, -50%) rotate(-90deg)"},east:{center:"translate(-25%, -50%) rotate(-90deg)",left:"translate(0, 0) rotate(180deg)",right:"translate(0, 0)"},west:{center:"translate(25%, -50%) rotate(90deg)",left:"translate(0, 0) rotate(180deg)",right:"translate(0, 0)"}},C=function(a,b,c){var e=d._autoDirection||b.direction||"south",f=d._autoAnchor||b.anchor,g=function(a){return"object"==typeof x[a][e]&&x[a][e][c]||(f?"0":"-50%")};a.style.transform="translate("+g("x")+(", "+g("y"))+")","active"!==c&&(a._elementInteractive.style.display=a._bind?"block":"none",a._elementTip.style.transform=B[e][f||"center"],["left","right","top","bottom"].forEach(function(b){a.style[b]=A[e][b](f),a._elementTip.style[b]=A[e][b](f,!0)}),a.style.borderRadius=(y[e][f]||[1]).reduce(function(a,c){return a+=(c?b.borderRadius||u.rounding:0)+" "},""))},D=function(a,b,c){var d=a._config||{};b="string"==typeof b?[b]:b,b.forEach(function(b){var e="_bubbleActive"===b,f="_bubblePreactive"===b,g=e&&d.transitionOff,h=f&&d.background,i=f&&d.color,j=f&&d.fontSize;Object.keys(v[b]).forEach(function(d){a.style[d]=c?v[b][d]:"transitionDuration"===d&&g?"0s":"background"!==d&&"borderBottomColor"!==d||!h?"color"===d&&i?i:"fontSize"===d&&j?j:v[b][d]:h}),c||!e&&!f||C(a,d,e?"active":"inactive")})},E=function(){d.update=function(){return q.apply(c,arguments)},d.add=d.refresh=d.remove=function(){return r.apply(c,arguments)},d.toggle=function(){return p.apply(c,arguments)}},F=function(){d._element=b.createElement("bubb-bobb");var a=d._element,c={_elementInteractive:"bubb-interactive",_elementTip:"bubb-tip",_elementContent:"bubb-content"};for(var e in c)a[e]=b.createElement(c[e]),a.appendChild(a[e]);D(a,["_bubble","_bubbleInactive"],!0),D(a._elementTip,"_bubbleTip",!0),D(a._elementInteractive,"_bubbleInteractive",!0),d._den=b.createElement("bubb-den"),d._den.style.display="none",d._den.appendChild(a),b.body.appendChild(d._den)},G=function(){var a=function(){return d._element._bind||D(d._element,"_bubbleInactive",!0)};d._element.addEventListener("mouseenter",a,!1)},H=function(){d._initialized=!0,d.triggers={},E(),F(),G()},I=["callback","hoverCallback","background","color","transitionOff","interactive","delay","width","fontSize","class","anchor","direction","borderRadius","autoHide","toggle","autoDirection"];"undefined"!=typeof module&&module.exports?module.exports=d:a.bubb=d}(window,document);